<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<title>Build-a-program</title>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="ui-elements/Block.css">
<link rel="stylesheet" href="ui-elements/Statement.css">
<link rel="stylesheet" href="ui-elements/Expression.css">
<link rel="stylesheet" href="functions.css">

</head>
<body>

<!-- main menu -->
<div id="page-menu" style="user-select: none; display: flex; flex-direction: column; justify-content: center; align-items: center;
    background: #1a1a1a; position: fixed; width: 100%; height: 100%;">

<div style="font-size: 80px; margin-bottom: 30px;">Welcome</div>
<div style="display: grid; width: 450px;">
    <button class="buttonbutton main-menu-button" style="grid-row: 1;" onclick="menu.CreateNewProgram()">Create a new program</button>
    <button class="buttonbutton main-menu-button" style="grid-row: 2;" onclick="menu.ShowLoadProgramOverlay(true)">Load program</button>
    <button class="buttonbutton main-menu-button" style="grid-row: 3;" onclick="document.getElementById('help-overlay').style.display=''">Help</button>
</div>

<div id="program-loader-overlay" class="fullscreen-overlay" style="display: none;" onclick="menu.ShowLoadProgramOverlay(false)">
    <div id="program-loader" onclick="event.stopPropagation()">
        <div style="font-size: 30px; margin-bottom: 22px;">Load program</div>
        <div id="program-loader-available-programs" style="height: calc(100% - 62px); overflow-y: auto; border: 2px solid #2c2c2c;"></div>
        <input id="program-load-from-file" type="file" style="display: none;" accept=".program" onclick="this.value=null" onchange="menu.LoadProgramFromFile(this.files[0])">
        <a id="program-exporter-link" style="display: none;"></a>
        <button style="position: absolute; top: 11px; right: 11px;" class="buttonbutton" onclick="menu.ShowLoadProgramOverlay(false)">Close</button>
        <button style="position: absolute; top: 11px; right: 122px;" class="buttonbutton" onclick="document.getElementById('program-load-from-file').click()">Import from file</button>
    </div>
</div>

<div id="help-overlay" class="fullscreen-overlay" style="display: none;" onclick="document.getElementById('help-overlay').style.display='none'">
    <div id="help-div" style="display: table; margin-top: 30px; margin-bottom: 30px;" onclick="event.stopPropagation()">
        <div>
            <div style="font-size: 40px; margin-bottom: 40px;">Help</div>
            <button class="buttonbutton" style="position: absolute; top: 10px; right: 10px;" onclick="document.getElementById('help-overlay').style.display='none'">Close</button>
        </div>
        <div style="font-size: 24px; line-height: 40px;">
            Welcome to Build-a-program! This application lets you build a computer program, without knowing how to write code.
            <br><br>
            To begin, select "Create a new program" from the main menu, and enter a name for your program.
            <br>
            After entering the name, you'll be able to see the program editor, and the Main function.
            Search for elements in the search box, or click on the + icon to add new program elements.
            <br><br>
            You move an element by clicking the light blue colored line on the left side of an element, then moving your mouse around.
            <br><br>
            Each element you add is a statement, or an expression in computer programming.
            The statemets that are added to the Main function, will be executed in order (from top to bottom).
            To add a statement to the Main function, drag it to the Main function's drop area, then release the mouse button to drop it.
            After dropping the element, it will be part of the program.
            <br><br>
            Here, you can learn about what each statement does:
            <ul>
                <li>Variable declaration: Creates a new variable that can store data.
                    The type of a variable can be either a number, a boolean value (true or false), or a string (text value).
                    The value of these variables can be later used in your program. Also, you can assign a new value to a variable any time.</li>
                <br>
                <li>Variable assignment: Assign a new value to the given variable. The value must match the type of the variable.</li>
                <br>
                <li>If Statement: An If Statement is made out of one or more blocks, and one or more conditions.
                    A block of an If Statement only executes, if its condition is true.
                    If it is false, then the next condition is checked, and if it's true, then its block is executed.
                    If neither of the conditions are true, then the "else block" will be executed (if any).</li>
                <br>
                <li>While Statement: Similar to the If Statement, but the While Statement can execute the block multiple times,
                    WHILE the condition is true (unlike the If Statement, which executes only one block, only once).</li>
                <br>
                <li>Function call: Calls the selected function, which either returns a value, or does something.
                    See each function's description for more information.
                    You can also create your own functions by clicking the "Functions" button in the editor.</li>
                <br>
                <li>Return statement: Exits the current function. If the function has a non-void return type, then a return value is also required.
                    The returned value will be assigned to the Function call element that called this function.</li>
            </ul>
            <br>
            And here, you can learn about the expressions:
            <ul>
                <li>Number, Boolean value, String: Constant values of the given type.</li>
                <br>
                <li>Variable: Gets the value of the given variable.</li>
                <br>
                <li>Numeric expression: Performs a mathematical operation on the two given numeric values (e.g. addition, subtraction, etc.)</li>
                <br>
                <li>Unary numeric expression: Performs a mathematical operation on a single numeric value (e.g. negate, absolute value, etc.)</li>
                <br>
                <li>Number comparison: Compares the two given numbers, and returns true or false depending on the operation (e.g. greater than, equals, etc.)</li>
                <br>
                <li>Binary boolean expression: Performs a boolean operation on the two given boolean values (e.g. and, or, etc.)</li>
                <br>
                <li>Unary boolean expression: Only one operation, the negate operation: negates the given boolean value.</li>
                <br>
                <li>String expression: Only one operation, the string concatenation: concatenates the two given string values.</li>
                <br>
                <li>String comparison: Decides if the two string values are equal or not.</li>
            </ul>
            <br>
            You can create new functions by clicking the "Functions" button, and selecting "New function".
            <br>
            After entering a name for the function, selecting a return type, and setting up the parameters, the function will be created.
            After that, you can call this function in your program any time you'd like.
            These functions can also be edited or deleted later.
            <br><br>
            You can run the program any time by clicking the "Run" button. If the program contains any errors, they will be shown in the console.
            <br>
            If the program doesn't contain any errors, then the program will be executed, and any output (created by using the Write function) will be written to the console.
            <br><br>
            Have fun building!
        </div>
    </div>
</div>

<!-- end of main menu -->
</div>

<!-- program editor -->
<div id="page-editor" style="display: none;">

<div id="main-editor" style="display: flex; flex-direction: column; align-items: stretch; height: 100vh; overflow: hidden;">
    <div style="margin: 8px 0px 0px 8px; display: flex; flex-grow: 1; flex-direction: column;">
        <div>
            <input id="search-box" class="text-input" type="text" placeholder="Search for elements">
            <button onclick="runner.RunButtonClicked()" class="buttonbutton" id="run-button">Run</button>
            <div id="spinner" class="loading-spinner loading-spinner-hidden"></div>
            <button id="function-editor-list-button" onclick="functionEditor.ShowFunctionEditorList(true)" class="buttonbutton">Functions</button>

            <button id="save-program-button" class="buttonbutton" style="position: absolute; margin-left: auto; right: 190px;" onclick="menu.SaveCurrentProgram()">Save</button>
            <button id="quit-to-menu-button" class="buttonbutton" style="position: absolute; margin-left: auto; right: 8px;" onclick="menu.QuitToMenu()">Quit to menu</button>
            <div id="main-drag-area-top-border"></div>
        </div>
        <div id="main-drag-area"></div>
        <div id="delete-item-drop-area" class="hidden"></div>

        <div id="search-results" class="search-results-hidden"></div>
    </div>

    <div id="console-hidden" class="console-hidden-visible">
        <button id="console-show-button" class="console-header-button" title="Show console" onclick="Console.Show()"></button>
    </div>

    <div id="console" class="console-hidden">
        <div id="console-header">
            <button id="console-hide-button" class="console-header-button" title="Hide the console" onclick="Console.Hide()"></button>
            <button id="console-clear-button" class="console-header-button" title="Clear the console" onclick="Console.Clear()"></button>
            <label style="user-select: none;"><input id="clear-console-on-run-checkbox" type="checkbox" checked> Clear console on run</label>
        </div>
        <div id="console-lines-div"></div>
        <div id="console-input-div" style="display: none;">
            <div id="console-input-arrow">&gt;</div>
            <input id="console-input" type="text" placeholder="Waiting for user input..." onkeydown="Console.MaybeEnterPressed(event)">
        </div>
    </div>
</div>

<div id="function-selector-overlay" class="fullscreen-overlay" style="display: none;" onclick="functionViewer.ShowAvailableFunctions(false)">
    <div id="function-selector" onclick="event.stopPropagation()">
        <div style="font-size: 24px; margin-bottom: 10px;" class="hidden-in-function-editor">Built-in functions</div>
        <div id="builtin-function-list" class="function-list hidden-in-function-editor"></div>
        <div style="font-size: 24px;" class="custom-functions-title">Custom functions</div>
        <div id="custom-function-list" class="function-list"></div>
        <button style="position: absolute; top: 11px; right: 190px;" class="buttonbutton visible-in-function-editor" onclick="elementHandler.SwitchToMainFunction(true)">Switch to Main function</button>
        <button style="position: absolute; top: 11px; right: 11px;" class="buttonbutton visible-in-function-editor" onclick="functionEditor.ShowFunctionEditor(true, null, false)">New function</button>
    </div>
</div>

<div id="function-viewer-overlay" class="fullscreen-overlay" style="display: none;" onclick="functionViewer.ShowFunctionInfo(false)">
    <div id="function-viewer" onclick="event.stopPropagation()">
        <div id="function-viewer-function-name" style="font-size: 36px; font-weight: bold; margin-bottom: 40px;"></div>
        <div class="header-text">Description:</div>
        <div id="function-viewer-function-description" class="normal-text"></div>
        <div class="header-text">Return type:</div>
        <div id="function-viewer-function-return-type" class="normal-text"></div>
        <div class="header-text">Parameters:</div>
        <div id="function-viewer-no-parameters-text" class="normal-text" style="display: none;">None</div>
        <table class="function-viewer-parameters-table">
            <tbody>
                <tr>
                    <th style="width: 250px;">Name</th>
                    <th style="width: 150px;">Type</th>
                    <th>Description</th>
                </tr>
            </tbody>
        </table>
        <button class="buttonbutton" style="position: absolute; top: 10px; right: 10px;" onclick="functionViewer.ShowFunctionInfo(false)">Back</button>
    </div>
</div>

<div id="function-editor-overlay" class="fullscreen-overlay" style="display: none;">
    <div id="function-editor">
        <input class="text-input" id="function-editor-function-name" style="font-size: 36px; font-weight: bold; margin-bottom: 40px;"
            placeholder="Function Name" onchange="functionEditor.FunctionEditorParameterChanged(true)">
        <div class="header-text">Description:</div>
        <input class="text-input normal-text" id="function-editor-function-description" placeholder="Function description" onchange="functionEditor.FunctionEditorParameterChanged(true)">
        <div class="header-text">Return type:</div>
        <select id="function-editor-function-return-type" class="type-selector normal-text" onchange="functionEditor.FunctionEditorParameterChanged(true)">
            <option value="void">Void</option>
            <option value="number">Number</option>
            <option value="boolean">Boolean</option>
            <option value="string">String</option>
        </select>
        <div class="header-text">Parameters:</div>
        <table id="function-editor-parameters-table" class="function-viewer-parameters-table">
            <tbody>
                <tr>
                    <th style="width: 250px;">Name</th>
                    <th style="width: 150px;">Type</th>
                    <th>Description</th>
                </tr>
            </tbody>
        </table>
        <div id="function-editor-error-text" style="display: none;"></div>
        <button class="buttonbutton" style="position: absolute; top: 10px; right: 140px;" onclick="functionEditor.ExitFunctionEditor(true)">Save</button>
        <button class="buttonbutton" style="position: absolute; top: 10px; right: 10px;" onclick="functionEditor.ExitFunctionEditor(false)">Cancel</button>
    </div>
</div>

<!-- end of program editor -->
</div>

<div id="loading-overlay" style="position: absolute; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.95); color: white; font-size: 10vh;
    top: 0px; left: 0px; display: none; justify-content: center; align-items: center; user-select: none;">Loading...</div>

<div id="alert-overlay" class="fullscreen-overlay" style="display: none;">
    <div id="alert-box" style="background: black; border-radius: 10px; font-size: 24px; border: 2px solid #4e4e4e; margin: auto;">
        <div id="alert-text" style="margin: 18px 18px 30px 18px; width: 600px; overflow-wrap: break-word;"></div>
        <input id="alert-input" type="text" class="text-input" style="width: calc(100% - 48px); margin: 0px 18px; font-size: 24px; display: none;">
        <div style="margin: 10px; display: flex; justify-content: flex-end;">
            <button id="alert-button-yes" class="buttonbutton" style="margin-left: 10px;">Yes</button>
            <button id="alert-button-no" class="buttonbutton" style="margin-left: 10px;">No</button>
            <button id="alert-button-cancel" class="buttonbutton" style="margin-left: 10px;">Cancel</button>
        </div>
    </div>
</div>

<div id="small-screen-warning" class="fullscreen-overlay" style="background: black; display: none; align-items: center; justify-content: center;">
    <div style="font-size: 10vh; text-align: center; user-select: none;">The application needs a larger screen size to work properly.</div>
</div>

<script src="lzma.js"></script>

<script src="helper.js"></script>
<script src="draggable.js"></script>

<script src="menu.js"></script>

<script src="ui-elements/ElementBase.js"></script>
<script src="ui-elements/BlockBase.js"></script>
<script src="ui-elements/Statements.js"></script>
<script src="ui-elements/Expressions.js"></script>
<script src="ui-elements/FunctionBody.js"></script>

<script src="compiler/compiler.js"></script>
<script src="runner/Runner.js"></script>
<script src="runner/Expressions.js"></script>
<script src="runner/Statements.js"></script>
<script src="runner/BuiltInFunctions.js"></script>

<script src="ui-elements/ElementHandler.js"></script>

<script src="htmlFunctions.js"></script>
<script src="console.js"></script>
<script src="functionViewer.js"></script>
<script src="functionEditor.js"></script>

</body>
</html>
